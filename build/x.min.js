/*! x - v0.0.0 - 2013-09-10 */
!function(a,b){if("function"!=typeof a[b]){var c=function(){};c.version="0.0.0",c.__modules={},c.bind=function(a,b){var c=[].slice,d=c.call(arguments,2);return"function"==typeof a.bind?(d.unshift(b),a.bind.apply(a,d)):function(){return a.apply(b,d.concat(c.call(arguments)))}},c.has=c.bind(c.call,Object.prototype.hasOwnProperty),c.extend=function(a){if(1==arguments.length)return a;for(var b=1,d=arguments.length;d>b;++b)c.forEach(arguments[b],function(b,c){a[c]=b})},c.define="function"==typeof define&&define.amd&&define||function(a,b,d){if(b&&b.length)for(var e=0;e<b.length;++e)b[e]=c.__modules[b[e]];c.__modules[a]=d.apply(this,b||[])},"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c),"function"==typeof define&&define.amd||(a[b]=c,a.define=c.define),c.define("X.Core",[],function(){return c})}}("undefined"!=typeof global?global:this,"X"),define("X.Enumerable",["X.Core"],function(a){var b=!{toString:1}.propertyIsEnumerable("toString"),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"],d={},e=Array.prototype,f=Object.prototype;Function.prototype,a.bind(f.hasOwnProperty);var g=e.forEach,h=e.indexOf,i=e.lastIndexOf;return a.Enumerable={forEach:function(e,f,h){if(null!==e){if(g&&e.forEach===g)return e.forEach(f,h);if(e.length===+e.length){for(var i=0,j=e.length;j>i;++i)if(a.has(e,i)&&f.call(h,e[i],i,e===d))return}else{var k;for(k in e)if(a.has(e,k)&&f.call(h,e[k],k,e)===d)return;if(b)for(var i=c.length-1;i>-1;--i)if(k=c[i],a.has(e,k)&&f.call(h,e[k],k,e)===d)return}}},each:function(b,c,d){a.forEach(b,function(a,b,e){return c.apply(d,b,a,e)})},indexOf:function(a,b,c){if(h&&a.indexOf===h)return a.indexOf(b,c);a=Object(a),c=Number(c),c=isNaN(c)&&0;for(var d=-1,e=a.length>>>0,f=0>c?Math.max(0,e+c):c;e>f;++f)if(a[f]===b){d=f;break}return d},lastIndexOf:function(a,b,c){if(i&&a.lastIndexOf===i)return a.LastIndexOf(b,c);for(var d=-1,e=+a.length||0;--e>-1;)if(b===a[e]){d=e;break}return d},every:function(b){a.forEach(b,function(){})},filter:function(){},some:function(){},reduce:function(){},reduceRight:function(){},map:function(){}},a.forEach=a.Enumerable.forEach,a.Enumerable}),define("X.Class",["X.Core"],function(a){var b=[].slice,c=a.extend,d=function(){return d.create.apply(d,b.call(arguments))};return c(d,{create:function(b,c){var e=d._extend(d);"function"==typeof b?(e=d._extend(b),c=c||{}):c="object"==typeof b?b:{};var f=e.prototype,g=f.__statics,h=c.__statics;return a.forEach(c,function(a,b){"function"==typeof a&&(a.__name__=b,a.__owner__=e),"__statics"!==b&&(f[b]=a)}),h&&a.forEach(h,function(a,b){e[b]=g[b]=a}),e},_extend:function(a){var b=function(){return b.prototype.constructor.apply(this,arguments)};if("function"!=typeof a)return b;var d=function(){};d.prototype=a.prototype,b.prototype=new d,b.__super=a,c(b.prototype,{$self:b,__statics:{}});var e=a.prototype.__statics;for(var f in e)b[f]=b.prototype.__statics[f]=e[f];return b},__super:null}),c(d.prototype,{$self:d,__statics:{},constructor:function(){},$super:function(a){var b=this.$super.caller,c=b.__name__,d=b.__owner__.__super,e=d.prototype[c];if("function"!=typeof e)throw"Call the super class's "+c+", but it is not a function!";return e.apply(this,a)}}),a.Class=d,d}),X.define("X.Promise",["X.Core","X.Class","X.Enumerable"],function(a,b){var c="pending",d="fulfilled",e="rejected",f=function(a,b){a.then(function(a){b.resolve(a)},function(a){b.reject(a)})};return a.Promise=b({constructor:function(){return this instanceof a.Promise?(this.$super(arguments),this._status=c,this._value=void 0,this._fulfilledArray=[],this._rejectedArray=[],void 0):new a.Promise},_status:null,_value:void 0,_fulfilledArray:null,_rejectedArray:null,_asyncExec:function(){var a=this;if(a._status!==c){var b=null;a._status===d?(a._rejectedArray=[],b=a._fulfilledArray):(a._fulfilledArray=[],b=a._rejectedArray),setTimeout(function(){for(var c,e=a._value;c=b.shift();)if("function"==typeof c.handler)try{var g=c.handler(e);g&&"function"==typeof g.then?f(g,c.promise):c.promise.resolve(g)}catch(h){c.promise.reject(h)}else c.promise[a._status===d?"resolve":"reject"](e)},0)}},then:function(b,c){var d=a.Promise();return this._fulfilledArray.push({promise:d,handler:b}),this._rejectedArray.push({promise:d,handler:c}),this._asyncExec(),d},done:function(a){return this.then(a)},fail:function(a){return this.then(null,a)},always:function(a){return this.then(a,a)},resolve:function(a){if(this._status!==c)throw Error("promise is not in "+c+" so can not resolve!");this._value=a,this._status=d,this._asyncExec()},reject:function(a){if(this._status!==c)throw Error("promise is not in "+c+" so can not resolve!");this._value=a,this._status=e,this._asyncExec()}}),a.Promise});